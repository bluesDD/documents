---
Title: サービスメトリックの監視が行えるようになりました・ほか
Date: 2014-12-19T17:04:00+09:00
URL: https://mackerel.io/ja/blog/entry/2014/12/19/170400
EditURL: https://blog.hatena.ne.jp/mackerelio/mackerelio-ja.hatenablog.mackerel.io/atom/entry/8454420450077488581
---

## サービスメトリックを監視し、アラートを受け取れます（実験的）

Mackerelではサービスメトリックの監視を実験的機能としてリリースいたしました。これまでは各ホストに紐付いたメトリックの監視のみ対応しておりましたが、サービスに紐付いたメトリックを閾値に基いて監視し、アラートを受け取ることができるようになりました。サービスのエラーレートや応答時間など、ホストに紐付かない指標の監視にご利用ください。

サービスメトリックの監視ルールの追加は、実験的な機能を有効にし（後述）、[監視ルール](https://mackerel.io/my/monitors)ページの「監視ルールを追加」から行えます。ホストメトリックの場合と同様にWarning、Criticalに対する閾値を設定してください。サービスメトリックが投稿されるたびに、最新の値が閾値と比較され、条件式が真となればアラートを発生・更新させます。

現状では、サービスメトリックのグラフを差分描画にしている場合も閾値との比較は絶対値により行われることにご注意ください。

![](https://cdn-ak.f.st-hatena.com/images/fotolife/m/mackerelio/20141218/20141218123629_original.png)

サービスメトリックの投稿方法に関して詳しくは、[ヘルプ](https://mackerel.io/ja/docs/entry/advanced/fluentd)をご覧ください。

実験的な機能としての提供ですので、通知のフォーマットなど仕様が変更になる場合がございます。あらかじめご了承ください。

### Mackerelで実験的な機能を有効にする

Mackerelでは、開発中の機能を「実験的」として一部のユーザに提供することがあります。ご利用のオーガニゼーションに対して実験的な機能を有効にする場合、[オーガニゼーションの設定ページ](https://mackerel.io/my?tab=setting)より「実験的機能」を有効にしてください。

## 利用プランに対するサービスメトリックの超過分の計算方法を定めました

これまで、オーガニゼーションに投稿されているサービスメトリックの数がプランの上限を超えた際の扱いを具体的に定めておりませんでしたが、以下のように計算することといたしました。

<div style="background-color: #F0F0F0; padding: 1em; font-size: 110%">サービスメトリックの超過数 ÷ 100 = ホスト1台分（端数切り上げ）</div>

実際のアクティブなホスト数にこの超過分を加えた総ホスト数が、ご利用のオーガニゼーションに設定したホスト数の上限以内に収まるようにご利用ください。

<strong>例: Standardプラン（サービスメトリック上限100）をご利用の場合</strong>

- アクティブなホスト数が3台、サービスメトリック投稿数が90の場合
  - サービスメトリックの超過がないので、総ホスト数は3台としてカウントされます。
- アクティブなホスト数が3台、サービスメトリック投稿数が250の場合
  - サービスメトリックの超過が150ですので、ホスト2台分と換算し、総ホスト数は3+2=5台としてカウントされます。

サービスメトリックをよりヘビーにご利用の場合は、sales@mackerel.io までご連絡ください。

---
Title: ' サービスメトリックの送信が途切れたことを監視できるようになりました ほか'
Category:
- weekly
Date: 2019-03-25T17:27:01+09:00
URL: https://mackerel.io/ja/blog/entry/weekly/20190325
EditURL: https://blog.hatena.ne.jp/mackerelio/mackerelio-ja.hatenablog.mackerel.io/atom/entry/17680117126997759902
---

Mackerelチーム CRE の三浦（id:missasan:detail）です。

これまでユーザーのみなさまからのご要望も多かった、サービスメトリックの途切れ監視機能がリリースされました。

サービスメトリックは、Mackerelエージェントを介さずにAPIを使ってメトリック投稿ができるので、いろいろなケースに活用をいただいています。このリリースで、気づいたらメトリック投稿が止まっていたというようなことがないよう、サービスメトリックが途切れた際に検知ができるようになりました。

それでは、今週のアップデート情報です。

## サービスメトリックの送信が途切れたことを監視できるようになりました

Mackerelでは、[サービスメトリックAPI](https://mackerel.io/ja/api-docs/entry/service-metrics)を利用して、外部サービスやアプリケーションから、特定のサーバーとは直接紐付かないメトリックを投稿し、可視化することができます。
投稿方法には、直接APIを叩いたり、[fluentdでサービスメトリックを投稿する](https://mackerel.io/ja/docs/entry/advanced/fluentd)方法などがあります。

サービスメトリックの途切れ監視は、このサービスメトリックを投稿する処理がなんらかの理由で途切れていることを検知する仕組みです。

これまでもユーザーの方より、サービスメトリックの投稿に利用していた fluentd が停止しておりサービスメトリックが送られていなかったが、このことに気がつくのに数日間かかった、などのお問い合わせをいただいておりました。途切れ監視を設定いただくことで、そのような状況を検知できるようになりました。

#### 設定方法

[監視ルールの設定画面](https://mackerel.io/my/monitors#create)で、サービスメトリック監視タブから、またはすでに設定されているサービスメトリック監視ルールの編集画面にて設定することが可能です。

[f:id:mackerelio:20190322182126p:plain]

## グラフボードの式グラフで凡例を表示するよう変更しました

サービス詳細画面から作成できる[グラフボード](https://mackerel.io/ja/docs/entry/howto/graphboard)に式グラフを表示した際に、以下のようにグラフ下部に凡例が表示されるよう変更しました。

[f:id:mackerelio:20190325142134p:plain]

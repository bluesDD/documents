---
Title: FAQ・プラン上限超過時のホスト台数換算について
Date: 2017-11-22T11:49:46+09:00
URL: https://mackerel.io/ja/docs/entry/faq/contracts/limit-exceeded-conversion
EditURL: https://blog.hatena.ne.jp/mackerelio/mackerelio-docs-ja.hatenablog.mackerel.io/atom/entry/8599973812319473392
---

各種項目数がプラン上限を超えている場合、それぞれ以下の計算により、追加のホスト台数として換算されます。端数は全て切り上げとなります。

* ホストメトリック
    * `超過数 ÷ プラン上限（Standardプランの場合、スタンダードホストでは200、マイクロホストでは30）`
    * 上限を超過している全てのホストに対して計算されます
    * あるホストのホストメトリック数は以下の式で求められます
        * `標準メトリック数 + カスタムメトリック数 + チェック監視数`
    * メトリックが紐づくホストの種類（スタンダードホストもしくはマイクロホスト）によって、それぞれに換算されます
* サービスメトリック
    * `超過数 ÷ プラン上限（Standardプランの場合200）`
    * スタンダードホストとして換算されます
* 外形監視
    * `超過数 ÷ プラン上限（Standardプランの場合20）`
    * スタンダードホストとして換算されます

## 例: Standardプランご利用の場合

Standardプランの項目の上限はそれぞれ、ホストメトリックはスタンダードホストで200、マイクロホストで30、サービスメトリックは200、外形監視項目数は20となっています。

以下、2つのご利用パターンを例示します。

### ご利用パターンA

| パターンA                      | 設定数 | 超過数 | 上限を超過したことによる追加のスタンダードホスト台数 | 追加のマイクロホスト台数 |
| ------------------------------ | ------:| ------:| ----------------------------------------------------:| ------------------------:|
| スタンダードホストA メトリック |    180 |      0 |                                                    0 |                        - |
| スタンダードホストB メトリック |    180 |      0 |                                                    0 |                        - |
| マイクロホストC メトリック     |     20 |      0 |                                                    - |                        0 |
| サービスメトリック             |     90 |      0 |                                                    0 |                        - |
| 外形監視                       |     19 |      0 |                                                    0 |                        - |

この場合、超過項目はないため、スタンダードホスト台数はA,Bの2台、マイクロホスト台数はCの1台とカウントされます。

### ご利用パターンB

| パターンB                      | 設定数 | 超過数 | 上限を超過したことによる追加のスタンダードホスト台数 | 追加のマイクロホスト台数 |
| ------------------------------ | ------:| ------:| ----------------------------------------------------:| ------------------------:|
| スタンダードホストA メトリック |    401 |    201 |                                                    2 |                        - |
| スタンダードホストB メトリック |    180 |      0 |                                                    0 |                        - |
| マイクロホストC メトリック     |     50 |     20 |                                                    - |                        1 |
| サービスメトリック             |    240 |     40 |                                                    1 |                        - |
| 外形監視                       |     30 |     10 |                                                    1 |                        - |

この場合、スタンダードホスト台数はA,Bの2台に加え、上限を超過したことによる追加のスタンダードホスト台数が2+1+1=4台あるため、合計2+4=6台、マイクロホスト台数はCの1台に加え、追加のマイクロホスト台数が1台あるため、合計1+1=2台とカウントされます。

---

[< FAQに戻る](https://mackerel.io/ja/docs/entry/faq)
